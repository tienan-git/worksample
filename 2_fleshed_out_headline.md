# Ruby on Railsの入門準備

## 0. このガイドを読んだ後、DiverさんはRuby on Railsの入門準備がOKでしょう

## 0.1 前提条件

- クライアント - サーバーの概要
- サーバー側のコードがHTTPリクエストを処理しレスポンスする方法

## 0.2 目的

- Ruby on Railsの入門準備

## 0.3 概要

- [Webアプリケーションフレームワークとは](#header1.1)
- [Webアプリケーションフレームワークが必要な理由](#header1.2)
- [Webアプリケーションフレームワークで何ができますか](#header1.3)
- [Ruby on Railsとは](#header2.1)
- [Ruby on Railsを選択する理由](#header2.2)

## 0.4 補足

- 該当ガイドで出ているソースコード、専用用語など、今では**すべて**が意味をなさない場合でも、心配しないでください。

- 今後の学習コースで個々にクリアしていきますので、その時に理解できれば大丈夫です。

## 1. Webアプリケーションフレームワーク
＊後続記事でWebフレームワークと簡略します。
<h3 id="header1.1">1.1 Webフレームワークとは</h3>

- Webフレームワークは、**Webアプリケーション**の作成、保守、および拡張を**容易**にする**ソフトウェアフレームワーク**です。

- 一般的なウェブ開発タスクを簡素化する**ツール**と**ライブラリー**を提供します。

<h3 id="header1.2">1.2 Webフレームワークが必要な理由</h3>

- Webアプリケーションを開発するには、必ずWebフレームワークを使う必要はありませんが、ウェブフレームワークは、一般的なウェブ開発操作を簡素化するためのツールとライブラリーを提供しますので、使用することを強くお勧めします。

- それはあなたの人生をずっと楽にするでしょう。

<h3 id="header1.3">1.3 Webフレームワークで何ができますか</h3>

このセクションでは、Webフレームワークによって提供されることが多い機能の一部について説明します (必ずしもすべてのフレームワークがこれらの機能のすべてを提供するわけではありません！)。

#### 1.3.1 リクエストを適切なハンドラにルーティングする
ほとんどのサイトは、別々の URL からアクセス可能なさまざまなリソースを数多く提供します。これらすべてを 1 つの関数で処理するのは管理が難しいため、Webフレームワークは URL パターンを特定のハンドラー関数にマッピングするための単純なメカニズムを提供します。ベースとなるコードを変更することなく特定の機能を提供するために使用される URL を変更できるため、このアプローチにはメンテナンスの面でも利点があります。

フレームワークが異なると、マッピングに異なるメカニズムを使用します。たとえば、Ruby on Rails (Ruby) Webフレームワークは、ルーティング設定ファイル `config/routes.rb` を使用してハンドラー関数への経路を追加します。

例えば、リクエストURL`home/index`からハンドラー関数への経路を追加する場合とします。

>ルーティング設定（Routing）
```
Rails.application.routes.draw do

  # URL(home/index)からハンドラー関数(index)への経路
  get 'home/index' => 'home#show'

end
```
>ハンドラ関数定義（Controller）
```
class HomeController < ApplicationController

  # ハンドラー関数(index)
  def index
  end
  
end
```

#### 1.3.2 リクエストのデータに簡単にアクセスできるようにする

リクエストのデータの例を上げます。
1. URLパラメータまたはURL構造内に含まれる情報 
2. リクエストの本文内に含まれる情報 

Webフレームワークは、この情報にアクセスするためのプログラミング言語に適したメカニズムを提供します。 例えば、Ruby on Rails (Ruby) のWebフレームワークは、 `params` を使用して上記1. または 2.の情報をアクセスできます。 

 例えば、リクエストのURL `home/index?status=activated` から、URLパラメーター `status=activated` をアクセスする場合とします。
 (上のセクションの最後のコードを見てください)

>ハンドラ関数定義（Controller）
```
class HomeController < ApplicationController

  # ハンドラー関数
  def index
　  # リクエストのURLに含まれるURLパラメーターを読み取り、値を変数statusへ割り当てる
　  status = params[:status]
  end
  
end
```

#### 1.3.3 データベースアクセスを抽象化および簡略化する

ウェブサイトは、データベースを使用して、ユーザと共有するための情報とユーザに関する情報の両方を保存します。Webフレームワークは多くの場合、データベースの読み取り、書き込み、照会、および削除操作を抽象化するデータベース層を提供します。この抽象化層は、オブジェクトリレーショナルマッパー (ORM) と呼ばれます。

ORM を使用することには、2 つのメリットがあります。

-   基になるデータベースを変更しても、データベースを使用するコードを変更する必要がありません。これにより、開発者は使用状況に基づいてさまざまなデータベースの特性を最適化できます。
-   データの基本的な検証はフレームワーク内に実装できます。これにより、データが正しい種類のデータベースフィールドに格納されていること、正しい形式 (メールアドレスなど) であることを確認することが簡単かつ安全になります。

たとえば、Ruby on Rails (Ruby) のWebフレームワークは ORM を提供します。

例えば、ユーザーの情報（名前、年齢、性別）を保管するデータベーステーブル`users` と モデル`User`を作成する場合とします。

>データベーステーブル定義（Database Table）
```
class CreateUsers < ActiveRecord::Migration[5.0]
  def change
    create_table :users do |t|
      t.string :name
      t.integer :age
      t.string :gender
    end
  end
end
```
名前が設定されなければならないという制限をモデル`User`に追加します。

>モデル定義（Model）
```
class User < ApplicationRecord
  validates :name, presence: true
end
```
名前が設定されないまま、新しいユーザーをデータベーステーブル`users`に書き込みする場合、エラーが発生します。
```
user = User.new
user.name = "" # 名前が設定しないまま
user.age = 50
user.gender = "Male"
user.save! # => ActiveRecord::RecordInvalid: Validation failed: Name can't be blank
```
データベーステーブル`users`から、全てのユーザーの読み取りを実行します。
>ハンドラ関数定義（Controller）
```
class UsersController < ApplicationController
  def index
    # データベーステーブルusersから全てのuserを読み取り、変数@usersに代入
    @users = User.all
  end
end
```
    
#### 1.3.4 データのレンダリング

Webフレームワークは通常テンプレートシステムを提供します。これにより、ページが生成されたときに追加されるデータのプレースホルダーを使用して、出力文書の構造を指定できます。テンプレートは HTML の作成によく使用されますが、他の種類の文書も作成できます。

Webフレームワークは多くの場合、[JSON](https://developer.mozilla.org/ja/docs/Glossary/JSON)  や  [XML](https://developer.mozilla.org/ja/docs/Glossary/XML)  など、格納されているデータから他のフォーマットを簡単に生成するためのメカニズムを提供します。

たとえば、Ruby on Rails テンプレートシステムでは、特定な構文 (例えば  `<%= [_variable_name_] or [_expression_] %>`) を使って変数または式を指定することができます。これは、ページがレンダリングされるときにハンドラ関数から渡された値に置き換えられます。

以下のコードスニペットはこれがどのように機能するかを示しています。前のセクションの「全てのユーザーの読み取り」の例を続けると、HTML テンプレートにはハンドラ関数によって  `@users`  というリスト変数が渡されます。HTML スケルトンの内部には、最初に  `@users`  変数が存在するかどうかを確認し、次に for ループ内でそれを繰り返す式があります。各イテレーションで、テンプレートはユーザーの  `name`  値をリストアイテムに表示します。

>HTML テンプレート定義（View）
```
<div class="users-index">
  <% if @users %>
    <ul>
    <% @users.each do |user| %>
      <li><%= user.name %></li>
    <% end %>
    </ul>
  <% else %>
	<p>ユーザーがありません。</p>
  <% end %>
</div>
```

## 2. Ruby on Rails 
＊後続記事でRailsと簡略します。

<h3 id="header2.1">2.1 Ruby on Railsとは</h3>

Railsは、Rubyプログラミング言語で記述されたWebアプリケーション開発フレームワークです。すべての開発者が始める必要があることを想定することで、Webアプリケーションのプログラミングを容易にするように設計されています。他の多くの言語よりも多くのことを達成しながら、少ないコードを書くことができます。フレームワーク：経験豊富なRails開発者は、Webアプリケーション開発をより楽しくすることも報告しています。

Railsは独断的なソフトウェアです。これは、物事を行う「最善の」方法があることを前提としており、その方法を奨励し、場合によっては代替策を思いとどまらせるように設計されています。「The Rails Way」を学ぶと、おそらく発見するでしょう生産性が大幅に向上します。他の言語の古い習慣をRails開発に持ち込み続け、他の場所で学んだパターンを使用しようとすると、満足度が低下する可能性があります。

Railsの哲学には、2つの主要な指針があります。

- 自分自身を繰り返さないでください：DRYはソフトウェア開発の原則であり、「すべての知識は、システム内で単一の明確で信頼できる表現を持つ必要があります。」同じ情報を何度も何度も記述しないことにより、コードはより多くなります保守性が高く、拡張性が高く、バグが少ない。

- 設定より規約：RailsはWebアプリケーションで多くのことを行う最良の方法について意見を持っています。無限の設定ファイルで細目を指定することを要求するのではなく、デフォルトでこの規約のセットに設定します。

Rails は、[Basecamp](https://basecamp.com/)、[GitHub](https://github.com/)、[Shopify](https://shopify.com/)、[Airbnb](https://airbnb.com/)、[Twitch](https://twitch.tv/)、[SoundCloud](https://soundcloud.com/)、[Hulu](https://hulu.com/)、[Zendesk](https://zendesk.com/)、[Square](https://square.com/)、[Highrise](https://highrisehq.com/) などの有名なサイトに使用されています。

<h3 id="header2.2">2.2 Ruby on Railsを選択する理由</h3>

#### 2.2.1 Rubyは依然として上位10のプログラミング言語の1つです

- Rubyが2019年のGitHubのトッププログラミング言語に含まれているため、Rubyがすぐになくなる可能性はほとんどありません。さらに、GitHubやAirbnbなどの大企業は、Ruby on Railsを継続的に使用しています。
- 2020年第1四半期でGitHub上でのプルリクエスト数は、Rubyが6位です。[https://madnight.github.io/githut/#/pull_requests/2020/1](https://madnight.github.io/githut/#/pull_requests/2020/1)

#### 2.2.2 コミュニティは活発で協力的です
- RailsフレームワークのGitHubには4,000人以上の寄稿者がいます。開発者が頻繁に更新したり新しいGem（ライブラリ）を作成したりすると、フレームワークを使用して作成されたアプリケーションをより簡単に開発し、より迅速に配信できます。

- アクティブなコミュニティは、経験と問題のトラブルシューティングを定期的に共有しています。Stackoverflowに関する310,000を超える質問では、発生している問題の解決策を見つけるのに本当に苦労することはほとんどありません。Rubyだけでなく、Ruby on Railsも成熟してきました年とそのドキュメントは非常に詳細で広範囲に渡っています。初心者にとって素晴らしい出発点です。

#### 2.2.3 Rubyは常に進化している
- Rubyクリエーターは、少なくとも年に2回の更新を行うことで、言語が失われず、常に進化し続けるようにします。Rubyの基本的な特性（特に動的な性質）により、パフォーマンスの問題がすぐになくなることはありませんが、 2020年のRuby 3のリリースでは、Rubyを大幅に高速化できるいくつかの改善が導入される予定です。

#### 2.2.4 スタートアップ、社内ツール、プロトタイピングなどに最適です
- 直感的でシンプルで読みやすい構文のおかげで生産性が大幅に向上するため、Rubyは新興企業や、ソフトウェア製品をできるだけ早く提供（および拡張）したいすべての企業に最適です。これは、限られた予算のスタートアップにとって重要です。このようにして、機能の更新やマーケティングなどの追加の開発に、より多くのお金を投資できます。

- 一方、大規模なプロジェクトでは、Ruby on Railsをプロトタイピングツールとして、または概念実証ソリューションを提供する効率的な方法として使用すると、Rubyでアプリケーションを構築および拡張するのが比較的簡単で安価であるため、また、パフォーマンスを最優先しない内部/バックエンドツールを構築するための優れたオプションです。

- 大規模な高性能アプリケーションでもRubyを使用することは珍しいことではありません。ただし、この言語には本質的に速度がバンドルされていないため、Rubyで高性能アプリケーションを作成する方法を知っているエンジニアが必要です。

#### 2.2.5 Rubyには確立されたコードスタイルの推奨事項があります
- Rubyは成熟したプログラミング言語であり、安定したテクノロジーであり、単に「トレンディ」であるというだけではありません。Rubyで悪いコードを書くことは依然として可能であり、言語が非常に柔軟であるため、かなり簡単であると言う人もいます。複数の方法で同じ結果が得られます（常に最も美しい方法とは限りません）。

- 一方、言語自体は美しく読みやすいコードを書くことを許可します—これは、実装とテストに関連する確立された一連のベストプラクティスによって奨励されます。そのようなコードは、適切に書かれれば、他の開発者が簡単に理解して保守できます。ソリューション全体の安定性と保守性をさらに向上させます。

#### 2.2.6 開発者の幸福
- 学習のための膨大な量のライブラリーとリソース、役立つアクティブなコミュニティ、確立されたベストプラクティス、美しく読みやすい構文—これらすべてにより、Rubyはプログラミング言語であり、楽しく作業できるプログラミング言語になっています。開発者の幸福を指向する言語です。

- 多くの場合、幸せな開発者はより良い価値を顧客に提供します。

## 3. まとめ

Ruby on Railsの入門準備として、Webフレームワークの基本概念やRuby on Railsを選んだ理由などを紹介しました。

それでは、一緒にRuby on Railsを楽しく学習して行きましょう。
